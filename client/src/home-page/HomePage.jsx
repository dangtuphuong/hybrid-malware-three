import { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";
import DataService from '../services/data-service';

const HomePage = () => {
    const [models, setModels] = useState([]);
    const navigate = useNavigate();

    useEffect(() => {
        DataService.getModels(setModels);
    }, [])

    const handleClick = async (id) => {
        const data = await DataService.getModel(id);
        navigate('/report/train', { state: data });
    }

    return (
        <div className={`space-y-2`}>
            <p className={`pt-5 text-center text-3xl font-bold`}>Model list</p>
            <p className={`text-center italic text-sm`}>Here you can checkout all the models trained by the admin</p>
            <div className={`p-10 flex justify-center`}>
                <div className={`w-[60%] grid grid-cols-2 gap-10`}>
                    { models.map((model, id) => 
                        <button key={id} className={`py-5 space-y-0.5 border border-zinc-400 rounded-lg shadow-sm shadow-cyan-300/50 hover:border-2 hover:shadow-lg hover:shadow-cyan-500/50`} onClick={() => handleClick(model.id)}>
                            <div className={`flex justify-center gap-2 font-medium`}>
                                <p className={``}>Model ID:</p>
                                <p className={``}>{model.id}</p>
                            </div>
                            <p className={`text-xs italic`}>Type: {model.modelName}</p>
                            <p className={`text-xs italic`}>Created at: {model.date}</p>
                            <div className={`pt-5 flex justify-between`}>
                                <div className={`px-5 space-y-3`}>
                                    <p className={`px-3 font-medium text-left`}>Created by: </p>
                                    <div className={`flex gap-5 items-center`}>
                                        <div className={`w-16 h-16 rounded-full bg-zinc-200 flex justify-center items-center text-3xl`}>
                                            {model.user.name[0].toUpperCase()}
                                        </div>
                                        <div className={`space-y-0.5 text-left text-sm font-medium`}>
                                            <p>Name: {model.user.name}</p>
                                            <p>Email: {model.user.email}</p>
                                            <p>Role: {model.user.role === 1 ? 'Admin' : 'User'}</p>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <p>
                                    </p>
                                </div>
                            </div>
                        </button>
                    )}
                </div>
            </div> 
        </div>
    )
}

export default HomePage;