import { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";
import DataService from '../services/data-service';
import styles from './HomePage.module.scss';

const HomePage = () => {
    const [models, setModels] = useState([]);
    const navigate = useNavigate();

    useEffect(() => {
        DataService.getModels(setModels);
    }, [])

    const handleClick = async (id) => {
        const data = await DataService.getModel(id);
        navigate('/report/train', { state: data });
    }

    return (
        <div style={{ marginTop: '100px' }}>
            {console.log(models)}
            { models.map((model, id) => 
                <button key={id} className={styles.btn} onClick={() => handleClick(model.id)}>
                    <span style={{ textAlign: 'left', margin: '5px' }}>Id: {model.id}</span>
                    <span style={{ textAlign: 'left', margin: '5px' }}>Model Name: {model.modelName}</span>
                    <span style={{ textAlign: 'left', margin: '5px' }}>User: {model.user}</span>
                    <span style={{ textAlign: 'left', margin: '5px' }}>Date: {model.date}</span>
                </button>
            )}
        </div>
    )
}

export default HomePage;